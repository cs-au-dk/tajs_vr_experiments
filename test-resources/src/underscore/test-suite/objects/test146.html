<html><head><title></title>
<script src='../../libraries/underscore-1.8.3.js'></script>
<script>// START OF QUNIT mock
function equal() {};
function deepEqual() {};
function strictEqual() {};
function ok() {};
function notStrictEqual() {};
function start() {};
// END OF QUNIT mock

    var intercepted = null;
    var interceptor = function(obj) { intercepted = obj; };
    var returned = _.tap(1, interceptor);
    equal(intercepted, 1, 'passes tapped object to interceptor');
    equal(returned, 1, 'returns tapped object');
    returned = _([1, 2, 3]).chain().
      map(function(n){ return n * 2; }).
      max().
      tap(interceptor).
      value();
    equal(returned, 6, 'can use tapped objects in a chain');
    equal(intercepted, returned, 'can use tapped objects in a chain');
</script></head><body></body></html>