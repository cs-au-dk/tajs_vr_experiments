<html><head><title></title>
<script src='../../libraries/underscore-1.8.3.js'></script>
<script>// START OF QUNIT mock
function equal() {};
function deepEqual() {};
function strictEqual() {};
function ok() {};
function notStrictEqual() {};
function start() {};
// END OF QUNIT mock

    deepEqual(_.flatten(null), [], 'Flattens supports null');
    deepEqual(_.flatten(void 0), [], 'Flattens supports undefined');
    deepEqual(_.flatten([[], [[]], []]), [], 'Flattens empty arrays');
    deepEqual(_.flatten([[], [[]], []], true), [[]], 'Flattens empty arrays');
    var list = [1, [2], [3, [[[4]]]]];
    deepEqual(_.flatten(list), [1, 2, 3, 4], 'can flatten nested arrays');
    deepEqual(_.flatten(list, true), [1, 2, 3, [[[4]]]], 'can shallowly flatten nested arrays');
    var result = (function(){ return _.flatten(arguments); }(1, [2], [3, [[[4]]]]));
    deepEqual(result, [1, 2, 3, 4], 'works on an arguments object');
    list = [[1], [2], [3], [[4]]];
    deepEqual(_.flatten(list, true), [1, 2, 3, [4]], 'can shallowly flatten arrays containing only other arrays');
    equal(_.flatten([_.range(10), _.range(10), 5, 1, 3], true).length, 23);
    equal(_.flatten([_.range(10), _.range(10), 5, 1, 3]).length, 23);
    equal(_.flatten([new Array(1000000), _.range(56000), 5, 1, 3]).length, 1056003, 'Flatten can handle massive collections');
    equal(_.flatten([new Array(1000000), _.range(56000), 5, 1, 3], true).length, 1056003, 'Flatten can handle massive collections');
</script></head><body></body></html>